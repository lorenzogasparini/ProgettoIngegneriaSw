<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="" readonly="0" foreign_keys="" case_sensitive_like="" temp_store="" wal_autocheckpoint="" synchronous=""/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="3502"/><column_width id="4" width="0"/></tab_structure><tab_browse><table title="." custom_title="0" dock_id="2" table="0,0:"/><dock_state state="000000ff00000000fd0000000100000002000005ba000003e1fc0100000002fb000000160064006f0063006b00420072006f00770073006500310100000000000005ba0000000000000000fb000000160064006f0063006b00420072006f00770073006500320100000000ffffffff0000013200ffffff000002d40000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings/></tab_browse><tab_sql><sql name="SQL 1*">BEGIN TRANSACTION;

CREATE TABLE IF NOT EXISTS &quot;amministratore&quot; (
	&quot;id&quot;	INTEGER,
	&quot;nome&quot;	VARCHAR(50) NOT NULL,
	&quot;cognome&quot;	VARCHAR(50) NOT NULL,
	&quot;username&quot;	VARCHAR(50) NOT NULL UNIQUE,
	&quot;password&quot;	VARCHAR(255) NOT NULL,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
);

CREATE TABLE IF NOT EXISTS &quot;diabetologo&quot; (
	&quot;id&quot;	INTEGER,
	&quot;username&quot;	VARCHAR(50) NOT NULL UNIQUE,
	&quot;nome&quot;	VARCHAR(50) NOT NULL,
	&quot;cognome&quot;	VARCHAR(50) NOT NULL,
	&quot;password&quot;	VARCHAR(255) NOT NULL,
	&quot;email&quot;	VARCHAR(100) NOT NULL,
	&quot;profile_image_name&quot;	TEXT,
	&quot;deleted&quot; BOOLEAN DEFAULT 0,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
);

CREATE TABLE IF NOT EXISTS &quot;paziente&quot; (
	&quot;id&quot;	INTEGER,
	&quot;nome&quot;	VARCHAR(50) NOT NULL,
	&quot;cognome&quot;	VARCHAR(50) NOT NULL,
	&quot;username&quot;	VARCHAR(50) NOT NULL UNIQUE,
	&quot;password&quot;	VARCHAR(255) NOT NULL,
	&quot;email&quot;	VARCHAR(100),
	&quot;id_diabetologo&quot;	INTEGER NOT NULL,
	&quot;data_nascita&quot;	DATE,
	&quot;peso&quot;	REAL,
	&quot;provincia_residenza&quot;	VARCHAR(2),
	&quot;comune_residenza&quot;	VARCHAR(100),
	&quot;note_paziente&quot;	TEXT,
	&quot;profile_image_name&quot;	TEXT,
	&quot;deleted&quot; BOOLEAN DEFAULT 0,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	FOREIGN KEY(&quot;id_diabetologo&quot;) REFERENCES &quot;diabetologo&quot;(&quot;id&quot;)
);

CREATE TABLE IF NOT EXISTS &quot;farmaco&quot; (
	&quot;id&quot;	INTEGER,
	&quot;codice_aic&quot;	VARCHAR(10) NOT NULL UNIQUE,
	&quot;nome&quot;	VARCHAR(1000) NOT NULL,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
);

CREATE TABLE IF NOT EXISTS &quot;patologia&quot; (
	&quot;id&quot;	INTEGER,
	&quot;nome&quot;	VARCHAR(1000) NOT NULL,
	&quot;codice_icd&quot;	VARCHAR(10) NOT NULL UNIQUE,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT)
);

CREATE TABLE IF NOT EXISTS &quot;log&quot; (
	&quot;id&quot;	INTEGER,
	&quot;id_paziente&quot;	INTEGER,
	&quot;id_diabetologo&quot;	INTEGER,
	&quot;azione&quot;	TEXT NOT NULL,
	&quot;timestamp&quot;	DATETIME DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	FOREIGN KEY(&quot;id_diabetologo&quot;) REFERENCES &quot;diabetologo&quot;(&quot;id&quot;),
	FOREIGN KEY(&quot;id_paziente&quot;) REFERENCES &quot;paziente&quot;(&quot;id&quot;)
);

CREATE TABLE IF NOT EXISTS &quot;terapia&quot; (
	&quot;id&quot;	INTEGER,
	&quot;id_diabetologo&quot;	INTEGER NOT NULL,
	&quot;id_farmaco&quot;	INTEGER NOT NULL,
	&quot;dosi_giornaliere&quot;	INTEGER,
	&quot;quantita_per_dose&quot;	REAL,
	&quot;note&quot;	TEXT,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	FOREIGN KEY(&quot;id_diabetologo&quot;) REFERENCES &quot;diabetologo&quot;(&quot;id&quot;) ,
	FOREIGN KEY(&quot;id_farmaco&quot;) REFERENCES &quot;farmaco&quot;(&quot;id&quot;)
);

CREATE TABLE IF NOT EXISTS &quot;patologia_paziente&quot; (
	&quot;id&quot;	INTEGER,
	&quot;id_paziente&quot;	INTEGER NOT NULL,
	&quot;id_patologia&quot;	INTEGER NOT NULL,
	&quot;id_terapia&quot;	INTEGER,
	&quot;data_diagnosi&quot;	DATE,
	&quot;note_patologia&quot;	TEXT,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	UNIQUE(&quot;id_paziente&quot;,&quot;id_patologia&quot;),
	FOREIGN KEY(&quot;id_patologia&quot;) REFERENCES &quot;patologia&quot;(&quot;id&quot;) ON DELETE CASCADE,
	FOREIGN KEY(&quot;id_paziente&quot;) REFERENCES &quot;paziente&quot;(&quot;id&quot;) ON DELETE CASCADE,
	FOREIGN KEY(&quot;id_terapia&quot;) REFERENCES &quot;terapia&quot;(&quot;id&quot;) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS &quot;rilevazione_farmaco&quot; (
	&quot;id&quot;	INTEGER,
	&quot;id_paziente&quot;	INTEGER NOT NULL,
	&quot;id_farmaco&quot;	INTEGER NOT NULL,
	&quot;timestamp&quot;	DATETIME DEFAULT CURRENT_TIMESTAMP,
	&quot;quantita&quot;	REAL,
	&quot;note&quot;	TEXT,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	FOREIGN KEY(&quot;id_farmaco&quot;) REFERENCES &quot;farmaco&quot;(&quot;id&quot;),
	FOREIGN KEY(&quot;id_paziente&quot;) REFERENCES &quot;paziente&quot;(&quot;id&quot;)
);

CREATE TABLE IF NOT EXISTS &quot;rilevazione_glicemia&quot; (
	&quot;id&quot;	INTEGER,
	&quot;id_paziente&quot;	INTEGER NOT NULL,
	&quot;timestamp&quot;	DATETIME DEFAULT CURRENT_TIMESTAMP,
	&quot;valore&quot;	INTEGER NOT NULL,
	&quot;gravita&quot;	INTEGER CHECK(&quot;gravita&quot; &gt;= 0 AND &quot;gravita&quot; &lt;= 3),
	&quot;prima_pasto&quot;	BOOLEAN,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	FOREIGN KEY(&quot;id_paziente&quot;) REFERENCES &quot;paziente&quot;(&quot;id&quot;)
);

CREATE TABLE IF NOT EXISTS &quot;rilevazione_sintomo&quot; (
	&quot;id&quot;	INTEGER,
	&quot;id_paziente&quot;	INTEGER NOT NULL,
	&quot;timestamp&quot;	DATETIME DEFAULT CURRENT_TIMESTAMP,
	&quot;sintomo&quot;	TEXT NOT NULL,
	&quot;intensita&quot;	INTEGER CHECK(&quot;intensita&quot; &gt;= 1 AND &quot;intensita&quot; &lt;= 10),
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	FOREIGN KEY(&quot;id_paziente&quot;) REFERENCES &quot;paziente&quot;(&quot;id&quot;)
);

CREATE TABLE IF NOT EXISTS &quot;alert&quot; (
	&quot;id&quot;	INTEGER,
	&quot;id_paziente&quot;	INTEGER NOT NULL,
	&quot;id_rilevazione&quot;	INTEGER NOT NULL,
	&quot;tipo_alert&quot;	TEXT NOT NULL CHECK(&quot;tipo_alert&quot; IN ('glicemia', 'promemoriaFarmaco', 'farmacoNonAssuntoDa3Giorni')),
	&quot;data_alert&quot;	TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	&quot;letto&quot;	BOOLEAN DEFAULT 0,
	PRIMARY KEY(&quot;id&quot; AUTOINCREMENT),
	FOREIGN KEY(&quot;id_paziente&quot;) REFERENCES &quot;paziente&quot;(&quot;id&quot;)
);





-- DB population

INSERT INTO &quot;amministratore&quot; VALUES (1,'Lorenzo','Gasparini','admin1','hashed_pw1');
INSERT INTO &quot;amministratore&quot; VALUES (2,'Andrea','Pellizzari','admin2','hashed_pw2');
INSERT INTO &quot;amministratore&quot; VALUES (3,'Pietro','Corsi','admin3','admin3');

INSERT INTO &quot;diabetologo&quot; VALUES (1,'drrossi','Luca','Rossi','1234','rossi@asl.it','drrossi.png', false);
INSERT INTO &quot;diabetologo&quot; VALUES (2,'drbianchi','Pietro','Bianchi','hashed_pw4','bianchi@asl.it','default.png', false);
INSERT INTO &quot;diabetologo&quot; VALUES (3,'drdestri','Mario','Destri','123456','mario.destri@gmail.it','drdestri.png', false);


INSERT INTO &quot;paziente&quot; VALUES (1,'Mario','Rossi','mario.rossi','1234','mario.rossi@gmail.com',1,'1980-05-12',87.0,'RM','Roma','Segue dieta bilanciata con carboidrati, frutta e verdura','mario.rossi.png', false);
INSERT INTO &quot;paziente&quot; VALUES (2,'Lucia','Verdi','lucia.verdi','1234','lucia.verdi@gmail.com',1,'1975-11-23',67.0,'MI','Milano','Allergica a penicillina','lucia.verdi.png', false);
INSERT INTO &quot;paziente&quot; VALUES (3,'Giulia','Bianchi','giulia.bianchi','hashed_pw7','giulia.bianchi@gmail.com',2,'1990-02-08',72.3,'TO','Torino',NULL,'default.png', false);
INSERT INTO &quot;paziente&quot; VALUES (4,'Andrea','Neri','andrea.neri','hashed_pw8','andrea.neri@gmail.com',2,'2000-07-30',78.0,'FI','Firenze','Sportivo, non fumatore','andrea.neri.png', true);
INSERT INTO &quot;paziente&quot; VALUES (5,'Mattia','Rebonato','rebonato.mattia','1234','mattia.rebonato@gmail.com',1,'2004-05-01',65.0,'VR','Angiari','non assume regolarmente i farmaci e ha spesso problemi!','rebonato.mattia.png', false);


INSERT INTO &quot;farmaco&quot; VALUES (1,'012345678','Metformina');
INSERT INTO &quot;farmaco&quot; VALUES (2,'987654321','Lisinopril');
INSERT INTO &quot;farmaco&quot; VALUES (3,'111222333','Atorvastatina');
INSERT INTO &quot;farmaco&quot; VALUES (4,'444555666','Insulina');


INSERT INTO &quot;patologia&quot; VALUES (1,'Diabete mellito tipo 2','E11');
INSERT INTO &quot;patologia&quot; VALUES (2,'Ipertensione','I10');
INSERT INTO &quot;patologia&quot; VALUES (3,'Dislipidemia','E78');
INSERT INTO &quot;patologia&quot; VALUES (4,'Obesit√†','E66');
INSERT INTO &quot;patologia&quot; VALUES (5,'Ipertensione secondaria','I15');


INSERT INTO &quot;log&quot; VALUES (25,NULL,1,'UpdateUser','2025-07-03 15:40:49');
INSERT INTO &quot;log&quot; VALUES (26,1,NULL,'UpdateUser','2025-07-03 15:41:35');
INSERT INTO &quot;log&quot; VALUES (27,NULL,3,'UpdateUser','2025-07-03 15:42:11');
INSERT INTO &quot;log&quot; VALUES (28,2,NULL,'SetTerapiaPaziente','2025-07-03 15:42:11');
INSERT INTO &quot;log&quot; VALUES (29,2,NULL,'SetTerapiaPaziente','2025-07-03 15:42:11');
INSERT INTO &quot;log&quot; VALUES (30,5,NULL,'UpdateUser','2025-07-03 15:42:11');
INSERT INTO &quot;log&quot; VALUES (31,1,NULL,'UpdateUser','2025-07-03 15:43:02');
INSERT INTO &quot;log&quot; VALUES (32,NULL,3,'UpdateUser','2025-07-03 15:43:16');
INSERT INTO &quot;log&quot; VALUES (33,2,NULL,'SetTerapiaPaziente','2025-07-03 15:43:16');
INSERT INTO &quot;log&quot; VALUES (34,2,NULL,'SetTerapiaPaziente','2025-07-03 15:43:16');
INSERT INTO &quot;log&quot; VALUES (35,5,NULL,'UpdateUser','2025-07-03 15:43:16');


INSERT INTO &quot;terapia&quot; VALUES (2,1,2,3,10.0,'Alla sera');
INSERT INTO &quot;terapia&quot; VALUES (3,1,3,1,20.0,'Preferibilmente la sera');
INSERT INTO &quot;terapia&quot; VALUES (4,1,4,3,15.0,'Prima dei pasti');
INSERT INTO &quot;terapia&quot; VALUES (16,1,1,2,40.0,'dopo i pasti');
INSERT INTO &quot;terapia&quot; VALUES (17,1,3,1,6.0,'test');
INSERT INTO &quot;terapia&quot; VALUES (19,1,1,1,1.0,'Alla mattina.');
INSERT INTO &quot;terapia&quot; VALUES (20,1,2,3,40.0,'da assumere alle 8.00, 14.00, 20.00 ogni giorno');


INSERT INTO &quot;patologia_paziente&quot; VALUES (1,1,3,2,'2021-06-01','Controlli regolari');
INSERT INTO &quot;patologia_paziente&quot; VALUES (2,1,2,2,'2020-01-15',NULL);
INSERT INTO &quot;patologia_paziente&quot; VALUES (3,2,2,17,'2022-03-12','Necessita insulina');
INSERT INTO &quot;patologia_paziente&quot; VALUES (4,3,3,3,'2021-10-05','Stabile');
INSERT INTO &quot;patologia_paziente&quot; VALUES (5,4,4,4,'2019-12-30',NULL);
INSERT INTO &quot;patologia_paziente&quot; VALUES (7,2,4,16,'2025-05-29','');
INSERT INTO &quot;patologia_paziente&quot; VALUES (9,1,1,19,'2025-06-25 20:45:58.246732684','');
INSERT INTO &quot;patologia_paziente&quot; VALUES (10,2,1,20,'2025-06-25 20:50:20.67619997','');
INSERT INTO &quot;patologia_paziente&quot; VALUES (11,5,2,NULL,'2025-07-03 18:41:19.516703372','');


INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (1,4,1,'2025-05-28 17:36:20',500.0,'Dopo colazione');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (2,3,3,'2025-05-28 17:36:20',500.0,'Dopo cena');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (3,2,1,'2025-05-28 17:36:20',15.0,'Insulina serale');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (4,3,1,'2025-05-28 17:36:20',20.0,'Routine sera');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (5,1,2,'2025-05-29 13:28:45.93308055',50.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (6,1,1,'2025-06-20 20:10:00.973677828',500.0,'Farmaco assunto correttamente.');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (7,1,2,'2025-06-20 21:03:50.781730179',50.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (8,1,2,'2025-06-20 21:07:27.93552956',50.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (9,1,1,'2025-06-20 21:15:43.09777634',500.0,'Tutte le rilevazioni nella norma.');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (10,1,2,'2025-06-20 21:19:17.160642452',100.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (11,1,2,'2025-06-20 21:21:04.473612705',50.0,'Tutte le rilevazioni corrette.');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (12,1,1,'2025-07-02 16:57:30.555',1.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (13,1,1,'2025-07-02 16:58:03.263',1.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (14,1,2,'2025-07-02 17:45:10.272',10.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (20,1,3,'2025-07-02 18:59:55.647',1.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (21,2,2,'2025-07-02 19:00:11.725',40.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (22,2,3,'2025-07-02 19:00:14.17',6.0,'');
INSERT INTO &quot;rilevazione_farmaco&quot; VALUES (23,1,1,'2025-07-03 17:24:23.7',1.0,'');


INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (1,1,'2025-05-28 17:36:20',145,1,1);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (2,1,'2025-05-28 17:36:20',140,0,0);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (3,2,'2025-05-28 17:36:20',230,2,0);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (4,3,'2025-05-28 17:36:20',60,2,1);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (5,4,'2025-05-28 17:36:20',95,0,1);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (6,1,'2025-05-29 13:28:45.924121088',270,3,1);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (7,1,'2025-06-20 20:54:25.227097475',150,0,0);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (8,1,'2025-06-20 21:10:49.646989162',160,0,1);
INSERT INTO &quot;rilevazione_glicemia&quot; VALUES (9,1,'2025-06-20 21:14:58.028944484',150,0,0);


INSERT INTO &quot;rilevazione_sintomo&quot; VALUES (1,1,'2025-05-28 17:36:20','Mal di testa',3);
INSERT INTO &quot;rilevazione_sintomo&quot; VALUES (2,2,'2025-05-28 17:36:20','Stanchezza',6);
INSERT INTO &quot;rilevazione_sintomo&quot; VALUES (3,3,'2025-05-28 17:36:20','Nausea',2);
INSERT INTO &quot;rilevazione_sintomo&quot; VALUES (4,4,'2025-05-28 17:36:20','Capogiri',5);
INSERT INTO &quot;rilevazione_sintomo&quot; VALUES (5,1,'2025-06-20 20:57:04.794586386','Mal di testa',2);
INSERT INTO &quot;rilevazione_sintomo&quot; VALUES (6,1,'2025-06-20 21:10:02.436314589','Mal di pancia',3);
INSERT INTO &quot;rilevazione_sintomo&quot; VALUES (7,1,'2025-07-03 17:24:50.483117717','mal di testa',3);


INSERT INTO &quot;alert&quot; VALUES (1,2,3,'glicemia','2025-05-17 08:00:00',0);
INSERT INTO &quot;alert&quot; VALUES (2,1,2,'glicemia','2025-05-16 18:30:00',1);
INSERT INTO &quot;alert&quot; VALUES (3,1,2,'promemoriaFarmaco','2025-05-15 21:00:00',1);
INSERT INTO &quot;alert&quot; VALUES (4,2,3,'farmacoNonAssuntoDa3Giorni','2025-05-16 22:00:00',1);
INSERT INTO &quot;alert&quot; VALUES (5,4,5,'glicemia','2025-05-17 07:00:00',0);
INSERT INTO &quot;alert&quot; VALUES (6,3,4,'promemoriaFarmaco','2025-05-16 08:00:00',0);
INSERT INTO &quot;alert&quot; VALUES (7,1,6,'glicemia','2025-05-29 13:28:45.924121088',1);
INSERT INTO &quot;alert&quot; VALUES (14,4,1,'farmacoNonAssuntoDa3Giorni','2025-06-22 12:02:25.453617668',1);
INSERT INTO &quot;alert&quot; VALUES (16,3,2,'farmacoNonAssuntoDa3Giorni','2025-06-22 12:03:03.447333542',0);
INSERT INTO &quot;alert&quot; VALUES (17,1,9,'farmacoNonAssuntoDa3Giorni','2025-06-24 18:42:00.462858865',1);
INSERT INTO &quot;alert&quot; VALUES (18,1,11,'farmacoNonAssuntoDa3Giorni','2025-06-24 18:42:00.463649488',0);


COMMIT;</sql><current_tab id="0"/></tab_sql></sqlb_project>
